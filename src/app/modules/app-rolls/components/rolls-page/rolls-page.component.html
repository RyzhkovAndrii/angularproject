<div class="container-fluid">
  <button class="btn btn-outline-dark btn-sm" (click)="openAddRollTypeModal()">
    <span class="material-icons">add</span>
  </button>
  <button type="button" class="btn btn-outline-dark btn-sm" (click)="showPreviousPeriod()">
    <span class="material-icons">arrow_back</span>
    Предыдущий период
  </button>
  <button *ngIf="isBeforePreviousPeriod()" class="btn btn-outline-dark btn-sm" (click)="showNextPeriod()">
    Следующий период
    <span class="material-icons">arrow_forward</span>
  </button>
  <button *ngIf="isPreviousPeriod()" class="btn btn-outline-dark btn-sm" (click)="showCurrentPeriod()">
    Текущий период
    <span class="material-icons">timelapse</span>
  </button>
  <div class="table-responsive">
    <table class="table table-bordered table-striped table-sm">
      <thead>
        <tr class="table-header">
          <th scope="col" colspan="4"></th>
          <th *ngFor="let monthYear of dateHeader" scope="col" [colSpan]="monthYearMap.get(monthYear) + 2/dateHeader.length"><small>{{ monthYear }}</small></th>
        </tr>
        <tr class="table-header">
          <th scope="col" class="row-name">Примечание</th>
          <th scope="col">Толщина</th>
          <th scope="col">Вес</th>
          <th scope="col">Цвет</th>
          <th scope="col">Остаток</th>
          <th scope="col" *ngFor="let day of daysHeader">
            {{ day.getDate() }}
          </th>
          <th scope="col">Всего</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="
        let rollInfo of sortByColor(rollsInfo)">
          <th scope="row" class="row-name" (click)="openEditRollTypeModal(rollInfo.rollType)">
            {{ rollInfo.rollType.note }}
          </th>
          <th scope="row" class="row-name">
            {{ rollInfo.rollType.thickness }}
          </th>
          <th scope="row" class="row-name">
            {{ rollInfo.rollType.minWeight }}–{{ rollInfo.rollType.maxWeight }}
          </th>
          <th scope="row" class="row-name">
            <span class="filled-circle" [ngStyle]="{ 'background-color': rollInfo.rollType.colorCode}"></span>
          </th>
          <td>
            {{ rollInfo.restRollLeftover.amount }}
          </td>
          <td *ngFor="let batch of getBatches(rollInfo.rollBatches); index as i" (click)="openCreateRollOperationModal(batch, i, rollInfo.rollType.id)">
            <div [ngClass]="{'roll-ready': isReady(batch)}">
              {{ getBatch(batch) }}
            </div>
          </td>
          <td>
            {{ rollInfo.totalRollLeftover.amount }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
